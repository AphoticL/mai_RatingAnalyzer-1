<html>
  <head>
  <title>検証日記 第1回 2018.01.01| 新・CYCLES FUNの寝言</title>
  <meta name="viewport" content="width=device-width,user-scalable=no,maximum-scale=1" />
  <link rel="stylesheet" media="all" type="text/css" href="css/style.css" />
  <link rel="stylesheet" media="all" type="text/css" href="css/tablet.css" />
  <link rel="stylesheet" media="all" type="text/css" href="css/smartphone.css" />
    <style type='text/css'>
      table {
        border-collapse: collapse;
      }
   </style>
  </head>
  
  <body>
    <p>新・CYCLES FUNの寝言</p>
    <h1>検証日記 第1回 2018.01.01</h1>
    
    <p>あけましておめでとうございます。@sgimeraです。</p>
    <p>一発目の解析日記を2018年初日にアップするというなかなか笑える状況ですが、</p>
    <p>お題はここ数日でサクッと？出てしまった解析結果をネタにしたHistory枠の話です。</p>
    <p>なお、大晦日に書き始めて終わらなかっただけ、という噂もありますが、気のせいです。</p>
    
    <h2>稼働2週間ちょっと</h2>
    <p>maimai MiLKが稼働して2週間とちょっと。1回目の曲追加も行われそれなりの運用状況にはなっているかと思います。</p>
    <p>サバイバルコースは、正直言って失敗していると思います。楽曲を解禁できないなら根詰めてやりたくないです。</p>
    <p>せめて解禁できる条件でもあれば（例えばLife45以上で解禁、とか。）多少は違っているかと思います。</p>
    <p>曲も譜面もいいのにもったいない…</p>
    <p>キャラはLv.100まで上げると私服ver.になるそうですが、そこまでアップさせる元気はありません。（笑）</p>
    <p>基本的に推しはなく、全キャラ平均的に上げてます。</p>

    <h2>Historyの話</h2>
    <p>まあ、そんな一般プレイヤーの雑感はどうでもよいですな。（ぉぃ</p>
    <p>本日のメインは、いきなり確定？してしまったHistory枠の話題です。</p>
    <p>今回はHistory枠の詳細？は省きます。BEST落ちしても埋めるだけ埋めておかないとRatingは増えない、という枠ですね。</p>
    <p>第0回日記にも書いてますが、とりあえずは紫+ver.から引き継いだ473曲を仮の枠としておきましょう、ということで進めてました。</p>
    
    <h3>History枠概要</h3>
    <p>BEST枠やRECENT枠の話はサイト内別ページに記載してますので、そこはわかっている前提で記載します。</p>
    <p>紫ver.から先のmaimaiにおける、レート値とRatingの行き来を行うための係数は44です。すなわち、44譜面分相当のデータで決まります。</p>
    <p>BESTは上位30曲、RECENTは10譜面、残り4譜面相当を（寝言日記の時代から）History枠と呼んでます。</p>
    <p>History枠の計算は、対象曲数をnとするとき、以下の式で計算できると考えております。</p>
    <br>
    <p>History枠Rating = 単曲レート値が上位n曲の合計 * (4/n) / 44 </p>
    <br>
    <p>単曲レート上位n曲の合計を平均したものの4倍したものがHistory枠のレート値となり、それをRating変換するべく44で割ったものがHistory枠となります。</p>
    
    <h3>検証概要</h3>
    <p>先ほど提示した式にそれぞれ下記の値を代入します。</p>
    <ul>
      <li>History枠のRating : 0.01
      <li>単曲レート値の上位n曲の合計 : 検証中に同じ曲を2度以上プレーしない前提で、プレーした単曲レート値の合計。いったん、Bsumとします。
    </ul>
    <p>すると、</p>
    <p> 0.01 = Bsum * (4/n)/44</p>
    <p> Bsum = 0.11*n</p>
    <p>となります。</p>
    <p>つまり、<b>0.11*譜面数</b>がHistoryを0.01増やすのに必要な単曲レートの合計値となります。</p>
    <p>History枠の譜面数と、単曲レートの合計値（History枠が0.01上昇するタイミング）は以下の通りです。</p>
    <table border=1>
      <tr>
      <th align=center> History<br>譜面数</b>
      <th align=center> 必要なBsum</b>
      </tr>
      <tr>
      <td align=center> 472 </td>
      <td align=center> 51.92 </td>
      </tr>
      <tr>
      <td align=center> 473 </td>
      <td align=center> 52.03 </td>
      </tr>
      <tr>
      <td align=center> 474 </td>
      <td align=center> 52.14 </td>
      </tr>
    </table>

    <p>この値をベースに、現時点で内部Lv.が反映している譜面を使って、
      単曲レート値合計がこれらの値を超える／超えないときに、BEST+RECENTの合計と実Ratingに差が出るかどうかで判定していきます。</p>
    <p>なお、検証は紫+ ver.に引き続き、Rooftop職人の全面協力です。データについても利用許可をいただいてます。ありがたやー。</p>

    <h3>検証方法</h3>
    <p>内部Lv.が判明している譜面をSSSを取ることで得られる単曲レート値の合計が先ほどの表の値を超えるときに、
      BEST+RECENTが表示される実Ratingと差がでるか、という方法です。</p>
    <p>検証自体はSSSを取る必要はありませんが、計算を簡単にする、という職人の意地？により、全譜面SSSで決めたようです。</p>

    <h3>譜面数473</h3>
    <p>まずは、私の予想している473譜面から行ったようです。</p>
    <p>473譜面、単曲レートの合計が52.03を超えたときにBEST+RECENTの合計と実Ratingに0.01の差が出るはずです。</p>
    <table border=1>
      <tr>
        <th align=right>譜面</th> <th align=center>表示<br>Rating</th>
        <td></td>
        <td>曲レート</td> <td>Bsum</td> <td>BEST枠</td> <td>RECENT</td> <td>B+R</td> 
      </tr>
      <tr>
        <td align=right>なずな2</td><td>0.58</td>
        <td></td>
        <td>13.00</td><td>13.00</td><td>0.29</td><td>0.29</td><td>0.58</td>
      </tr>
      <tr>
        <td align=right>お嫁にしないさい</td><td>1.18</td>
        <td></td>
        <td>13.00</td><td>26.00</td><td>0.59</td><td>0.59</td><td>1.18</td>
      </tr>
      <tr>
        <td align=right>Stand Up</td><td>1.76</td>
        <td></td>
        <td>12.85</td><td>38.85</td><td>0.88</td><td>0.88</td><td>1.76</td>
      </tr>
      <tr>
        <td align=right>でんでん</td><td>2.37</td>
        <td></td>
        <td>13.20</td><td><font color=red>52.05</font></td><td>1.18</td><td>1.18</td><td>2.36</td>
      </tr>
  </table>
  <p>4譜面目をプレーした状態で単曲レートの合計が52.03以上となる52.05となりました。</p>
  <p>また、Best枠とRecent枠の合計と実Ratingの差が0.01となりました。</p>
  <p>よって、Historyは473曲以上、と言えます。</p>

  <h3>472譜面</h3>
  <p>今回は、そのまま1譜面減の472譜面を試したようです。</p>
  <p>カードは継続で、History0.02の検証となります。</p>
  <p>472譜面でHistory0.02の検証なので、単曲レートが103.84(=51.92*2)以上、104.06(=52.03*2)未満の時の時にB+Rと実Ratingが0.02になるかどうかで判断します。</p>
  <p>先ほど（473譜面）の続きとなるため、最初から0.01の差があることは頭においてから続きの表を見てください。
    <table border=1>
      <tr>
        <th align=right>譜面</th> <th align=center>表示<br>Rating</th>
        <td></td>
        <td>曲レート</td> <td>Bsum</td> <td>BEST枠</td> <td>RECENT</td> <td>B+R</td> 
      </tr>
      <tr>
        <td align=right>うまる</td><td>2.95</td>
        <td></td>
        <td>13.00</td><td>65.05</td><td>1.47</td><td>1.47</td><td>2.94</td>
      </tr>
      <tr>
        <td align=right>神室雪月花</td><td>3.55</td>
        <td></td>
        <td>13.10</td><td>78.15</td><td>1.77</td><td>1.77</td><td>3.54</td>
      </tr>
      <tr>
        <td align=right>ごちうさ</td><td>4.13</td>
        <td></td>
        <td>12.85</td><td>91.00</td><td>2.06</td><td>2.06</td><td>4.12</td>
      </tr>
      <tr>
        <td align=right>Bad Apple</td><td>4.73</td>
        <td></td>
        <td>12.95</td><td><font color=red>103.95</font></td><td>2.36</td><td>2.36</td><td>4.72</td>
      </tr>
  </table>
  <p>単曲レートの合計が103.95となりました。103.84以上104.06未満の条件に当てはまる値が出てきましたが、
    B+Rの合計と実Ratingの差は0.01のままとなりました。</p>
  <p>よって、472譜面以下ということはありません。</p>
  <br>

  <h3>結論：Historyの曲は473</h3>
  <p>473以上、472以下はない、ということで、なんと一発で473曲確定となりました。</p>
  <p>前回も同じような推測方法で出してますが、473曲は紫+ver.から引き継がれた曲数と一致しており、ずれたものではないと思ってます。</p>
  <p>信じるも信じないも読者（いるのか？）次第ですが、舞レート解析はその値で算出することといたします。</p>
  <br><br>
  <p>2018年もmaimaiを楽しんでいきたいと思います。</p>
  <p>ではまた。</p>
    
    <hr size=1>
      <p align=right>直接リンクは構いませんが、無断転載を禁止します。 ご連絡は<a href='https://twitter.com/sgimera'>@sgimera</a>まで。</p>
    
  </body>
</html>
