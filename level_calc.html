<html>
  <head>
  <title> ”枠”の計算（作成中） | 新・CYCLES FUNの寝言（仮） </title>
  <meta charaset="utf-8">
  <meta name="viewport" content="width=device-width,user-scalable=no,maximum-scale=1" />
  <link rel="stylesheet" media="all" type="text/css" href="css/style.css" />
  <link rel="stylesheet" media="all" type="text/css" href="css/tablet.css" />
  <link rel="stylesheet" media="all" type="text/css" href="css/smartphone.css" />
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="scripts/mai_inner_level.js"></script>
  <script src="scripts/calc_rating.js"></script>
  <script type="text/javascript" language="javascript">
  function mra_level_calc()
    {
      var tmp = 0, current_level=0, music_top=0;
      var recent_list=[0], best_tmp=0, best_waku=0;
      for(var i=0; i<$('[id=id_achi]').length; i++)
      {
        if($('[id=id_achi]')[i].value == "")
          continue;

        if((Number($('[id=id_achi]')[i].value) < 80) || (104 < (Number($('[id=id_achi]')[i].value))))
        {
          $('[id=out_rate]')[i].innerHTML = "Error";
          return;
        }
           
        if($('[id=id_lv]')[i].value != "")
        {
          current_level=$('[id=id_lv]')[i].value;
        }
        tmp = mra_arch2rate_10000($('[id=id_achi]')[i].value, current_level);
        tmp = Math.floor(tmp/100);
        $('[id=out_rate]')[i].innerHTML = tmp/100; 
      }
      
      for(i=0; i<$('[id=out_rate]').length; i++)
      {
        tmp = $('[id=out_rate]')[i].value;
        console.log(i + ":" + tmp);
        if(tmp =="")
        {
          continue;
        }
        
        best_tmp=Math.max(Number(tmp), best_tmp);
        recent_list.push(tmp);
        recent_list=recent_list.sort(function(a,b){return b - a;});
        
        $('[id=out_calc]')[i].innerHTML = "";
        $('[id=out_best]')[i].innerHTML = best_tmp;
        $('[id=out_rect]')[i].innerHTML = recent_list[0];
        $('[id=out_hist]')[i].innerHTML = "";
      }
      
    }
    
  function mra_reset_input_data()
  {
    for(var i=0; i<$('[id=id_achi]').length; i++)
    {
      $('[id=id_lv]')[i].innerHTML = "";
      $('[id=id_achi]')[i].innerHTML = "";
      $('[id=id_rate]')[i].innerHTML = "";
    }
    return;
  }
    
  function mra_reset_output_result()
  {
      for(var i=0; i<$('[id=id_achi]').length; i++)
      {
        $('[id=out_rate]')[i].innerHTML = "";
        $('[id=out_calc]')[i].innerHTML = "";
        $('[id=out_best]')[i].innerHTML = "";
        $('[id=out_rect]')[i].innerHTML = "";
        $('[id=out_hist]')[i].innerHTML = "";
      }
    
    return;
  }
    
  function mra_button_calc()
  {
    mra_reset_output_result();
    mra_level_calc();
  }
  
  function mra_button_reset()
  {
    mra_reset_input_data();
    mra_reset_output_result();
  }

  </script>
  </head>
  
  <body>
  
  <h1>”枠”の計算</h1>
  
  <p>試供品</p>

  <form name=rate_result>
  <table border=0 align=center>
  <tr>
    <th>内部<br>Lv.</th>
    <th>達<br>成<br>率</th>
    <th>表示<br>Rat<br>ing</th>
    <th></th>
    <th>単曲<br>レート<br>値</th>
    <th>算出<br>Rat<br>ing</th>
    <th>BEST<br>枠</th>
    <th>RCNT<br>枠</th>
    <th>HIST<br>枠</th>
  </tr>
  
  <tr>
    <td><input type=text align=center name=lv id=id_lv size=2 maxlength=4></td>
    <td><input type=text align=center name=achi id=id_achi size=3 maxlength=6></td>
    <td><input type=text align=center name=rate id=id_rate size=3 maxlength=5></td>
    <td></td>
    <td id=out_rate align=center></td>
    <td id=out_calc align=center></td>
    <td id=out_best align=center></td>
    <td id=out_rect align=center></td>
    <td id=out_hist align=center></td>
  </tr>
 
  <tr>
    <td><input type=text align=center name=lv id=id_lv size=2 maxlength=4></td>
    <td><input type=text align=center name=achi id=id_achi size=3 maxlength=6></td>
    <td><input type=text align=center name=rate id=id_rate size=3 maxlength=5></td>
    <td></td>
    <td id=out_rate align=center></td>
    <td id=out_calc align=center></td>
    <td id=out_best align=center></td>
    <td id=out_rect align=center></td>
    <td id=out_hist align=center></td>
  </tr>

   <tr>
    <td><input type=text align=center name=lv id=id_lv size=2 maxlength=4></td>
    <td><input type=text align=center name=achi id=id_achi size=3 maxlength=6></td>
    <td><input type=text align=center name=rate id=id_rate size=3 maxlength=5></td>
    <td></td>
    <td id=out_rate align=center></td>
    <td id=out_calc align=center></td>
    <td id=out_best align=center></td>
    <td id=out_rect align=center></td>
    <td id=out_hist align=center></td>
  </tr>

   <tr>
    <td><input type=text align=center name=lv id=id_lv size=2 maxlength=4></td>
    <td><input type=text align=center name=achi id=id_achi size=3 maxlength=6></td>
    <td><input type=text align=center name=rate id=id_rate size=3 maxlength=5></td>
    <td></td>
    <td id=out_rate align=center></td>
    <td id=out_calc align=center></td>
    <td id=out_best align=center></td>
    <td id=out_rect align=center></td>
    <td id=out_hist align=center></td>
  </tr>

   <tr>
    <td><input type=text align=center name=lv id=id_lv size=2 maxlength=4></td>
    <td><input type=text align=center name=achi id=id_achi size=3 maxlength=6></td>
    <td><input type=text align=center name=rate id=id_rate size=3 maxlength=5></td>
    <td></td>
    <td id=out_rate align=center></td>
    <td id=out_calc align=center></td>
    <td id=out_best align=center></td>
    <td id=out_rect align=center></td>
    <td id=out_hist align=center></td>
  </tr>

   <tr>
    <td><input type=text align=center name=lv id=id_lv size=2 maxlength=4></td>
    <td><input type=text align=center name=achi id=id_achi size=3 maxlength=6></td>
    <td><input type=text align=center name=rate id=id_rate size=3 maxlength=5></td>
    <td></td>
    <td id=out_rate align=center></td>
    <td id=out_calc align=center></td>
    <td id=out_best align=center></td>
    <td id=out_rect align=center></td>
    <td id=out_hist align=center></td>
  </tr>

   <tr>
    <td><input type=text align=center name=lv id=id_lv size=2 maxlength=4></td>
    <td><input type=text align=center name=achi id=id_achi size=3 maxlength=6></td>
    <td><input type=text align=center name=rate id=id_rate size=3 maxlength=5></td>
    <td></td>
    <td id=out_rate align=center></td>
    <td id=out_calc align=center></td>
    <td id=out_best align=center></td>
    <td id=out_rect align=center></td>
    <td id=out_hist align=center></td>
  </tr>

   <tr>
    <td><input type=text align=center name=lv id=id_lv size=2 maxlength=4></td>
    <td><input type=text align=center name=achi id=id_achi size=3 maxlength=6></td>
    <td><input type=text align=center name=rate id=id_rate size=3 maxlength=5></td>
    <td></td>
    <td id=out_rate align=center></td>
    <td id=out_calc align=center></td>
    <td id=out_best align=center></td>
    <td id=out_rect align=center></td>
    <td id=out_hist align=center></td>
  </tr>

   <tr>
    <td><input type=text align=center name=lv id=id_lv size=2 maxlength=4></td>
    <td><input type=text align=center name=achi id=id_achi size=3 maxlength=6></td>
    <td><input type=text align=center name=rate id=id_rate size=3 maxlength=5></td>
    <td></td>
    <td id=out_rate align=center></td>
    <td id=out_calc align=center></td>
    <td id=out_best align=center></td>
    <td id=out_rect align=center></td>
    <td id=out_hist align=center></td>
  </tr>

   <tr>
    <td><input type=text align=center name=lv id=id_lv size=2 maxlength=4></td>
    <td><input type=text align=center name=achi id=id_achi size=3 maxlength=6></td>
    <td><input type=text align=center name=rate id=id_rate size=3 maxlength=5></td>
    <td></td>
    <td id=out_rate align=center></td>
    <td id=out_calc align=center></td>
    <td id=out_best align=center></td>
    <td id=out_rect align=center></td>
    <td id=out_hist align=center></td>
  </tr>

    <tr>
    <td><input type=text align=center name=lv id=id_lv size=2 maxlength=4></td>
    <td><input type=text align=center name=achi id=id_achi size=3 maxlength=6></td>
    <td><input type=text align=center name=rate id=id_rate size=3 maxlength=5></td>
    <td></td>
    <td id=out_rate align=center></td>
    <td id=out_calc align=center></td>
    <td id=out_best align=center></td>
    <td id=out_rect align=center></td>
    <td id=out_hist align=center></td>
  </tr>

   <tr>
    <td><input type=text align=center name=lv id=id_lv size=2 maxlength=4></td>
    <td><input type=text align=center name=achi id=id_achi size=3 maxlength=6></td>
    <td><input type=text align=center name=rate id=id_rate size=3 maxlength=5></td>
    <td></td>
    <td id=out_rate align=center></td>
    <td id=out_calc align=center></td>
    <td id=out_best align=center></td>
    <td id=out_rect align=center></td>
    <td id=out_hist align=center></td>
  </tr>

   <tr>
    <td><input type=text align=center name=lv id=id_lv size=2 maxlength=4></td>
    <td><input type=text align=center name=achi id=id_achi size=3 maxlength=6></td>
    <td><input type=text align=center name=rate id=id_rate size=3 maxlength=5></td>
    <td></td>
    <td id=out_rate align=center></td>
    <td id=out_calc align=center></td>
    <td id=out_best align=center></td>
    <td id=out_rect align=center></td>
    <td id=out_hist align=center></td>
  </tr>

 </table>
  <center>
  <input type=button value="計算" value="Exec" onclick="mra_button_calc()">
  <input type=button value="リセット" value="Exec" onclick="mra_button_reset()">
  </center>
  </form>
  </body>
</html>
